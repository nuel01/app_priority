<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="author" content="colorlib.com">
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,600,700" rel="stylesheet"
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link href="{{ url_for('static', filename='./css/main.css' )}}" rel="stylesheet" />
    <script src="{{url_for('static', filename='js/jquery-3.4.1.min.js')}}"></script>
    <script src="{{url_for('static', filename='js/bootstrap.min.js')}}"></script>
    <script src="{{url_for('static', filename='js/popper.min.js')}}"></script>
    <script src="{{url_for('static', filename='js/main.js')}}"></script>


	<title>App Reviews Prioritization</title>
	<style>

  .s010 form .inner-form .btn {
  border: none;
  color: white;
  padding: 14px 28px;
  font-size: 16px;
  cursor: pointer;
    }

    .s010 form .inner-form .view_reviews {background-color: #04AA6D;} /* Green */
    .s010 form .inner-form .view_reviews :hover {background-color: #46a049;}

    .s010 form .inner-form .download {background-color: #2196F3;} /* Blue */
    .s010 form .inner-form .download :hover {background: #0b7dda;}

		ul {
		  list-style-type: none;
		  margin: 0;
		  padding: 0;
		  overflow: hidden;
		  background-color: #333;
		}

		li {
		  float: left;
		}

		li a {
		  display: block;
		  color: white;
		  text-align: center;
		  padding: 14px 16px;
		  text-decoration: none;
		}

		li a:hover:not(.active) {
		  background-color: #111;
		}

		.active {
		  
		}
		</style>
  </head>
  <body>
		<ul>
		  <li><a class="active" href="{{ url_for('index')}}">Home</a></li>
		  
		  <li><a href="{{ url_for('about')}}">About</a></li>
		</ul>
		<div class="header">
		  <h1>User Reviews Prioritization</h1>
		  <p>Bukunola Olorunda</p>
		</div>

    <div class="s010">
      <form role="search" name="searcharea">
        <div class="inner-form">

          <div class="basic-search">
            <div class="input-field">
              <input id="q" type="search" style="color:white;" name='q' placeholder="APP ID" required/ >
              <div class="icon-wrap">
				  <button type="submit" class="btn-search" id="query">

                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
				  </button>
              </div>
            </div>
            <span  id='inputtext_err' style="color:red;"></span>
          </div>

          <div class="advance-search">
           
            <div class="row">

              <div class="input-field">
                <div class="input-select">
                  <label style="color:white;" for="searchOpt">Search Option</label>
                  <select data-trigger="" id='searchOpt' name="searchOpt" required>
                    <option placeholder="Search Option" value=""></option>
                    <option value='Most Relevant'>Newest</option>
                    <option value='Newest'>Most Relevant</option>
                  </select>
                </div>
              </div>             
            
			
              <div class="input-field">
                <div class="input-select">
                  <label style="color:white;" for="prty">Priority</label>
                  <select data-trigger="" id= 'prty' name="prty" required >
                    <option placeholder="Priority" value=""> </option>
                    <option value='Time'>Time</option>
                    <option value='Cost'>Cost</option>
					          <option value='Importance'>Importance</option>
                  </select>
                </div>
              </div>

              <div class="input-field2">
                
                    <label style="color:white;" for="btnum">200 Reviews/Batch</label>
                    <input type="text" id="btnum" name="btnum" 
                      oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');" / required>
                
              </div>

            </div>  
            
            <div class="row second">
              <div class="input-field">
                <div class="result-count">
                  
                <div class="group-btn">
                  <button type="reset" class="btn-delete" id="delete">Clear Search</button>
                  
                </div>
              </div>
            </div>
          </div>

        </div>

        <div style="display:none; padding-left:37px;"  id="eval"  >   
            <!-- <h4 style=''>Analysis Result </h4> -->

            <a href="{{url_for('viewresult')}}" target="_blank" class="btn view_reviews" >View Reviews</a> 
        <!--     <button style="width:28%;" class="btn download" id="dbtn">Download Reviews</button>
 
             <button class="btn warning">Warning</button>
            <button class="bt5 danger">Danger</button>
            <button class="btn default">Default</button> -->
              <!-- <a href="{{url_for('viewresult')}}" class="btn viewresult" target="_blank" id="eval">View</a>  -->        
              
              
        </div>
            
        </div>

          <div style="display:none;"  id="loader"></div>

          <div style="display:none; color: red; background-color: white;" id="myDiv" class="animate-bottom">
              <span id="resID"> </span>
          </div>


      </div>
    </form>    
</div>
<!--     <script src="{{ url_for('static', filename='js/extention/choices.js') }}"></script> -->
     <script>
    $(function(){
        $('#delete').bind('click', function(){
        var clr = $.trim($('q').val());       
        $('#resID').empty();$("#inputtext_err").html('');
    }); })

    $(function(){              
        // input processsing with text box
        $('#query').bind('click', function(){
            $("#inputtext_err").html('.   Please Wait');
            $('#resID').empty();
            $("#eval").hide();
            document.getElementById("myDiv").style.display = "none";
            document.getElementById("loader").style.display = "block";
            

            $.getJSON('/search_rvs', {appID:$('input[name="q"]').val(), sch_opt:$('select[name="searchOpt"]').val(), 
                                      sort_opt:$('select[name="prty"]').val(), btnum:$('input[name="btnum"]').val()},

                function(data){                                    
                    if(data.error_input){
                        $("#inputtext_err").html(data.error_input);
                        document.getElementById("loader").style.display = "none";}

                    else{
                        document.getElementById("loader").style.display = "none";
                        $("#inputtext_err").html("");
                        document.getElementById("myDiv").style.display = "block";                      
                        $('#resID').html(data.result);
                        if( JSON.stringify(data.result) === JSON.stringify('')){
                                $("#eval").show();
                        }    
                        
                        }                                        
                });            
            return false;        
    }); })

    $(function(){
            $('#dbtn').bind('click', function(){
                $.getJSON('/getfile',
              function (data) {
                      var file = new Blob([data.result]);
                      if (window.navigator.msSaveOrOpenBlob) // IE10+
                          window.navigator.msSaveOrOpenBlob(file, '/file.txt');
                      else { // Others
                          var a = document.createElement("a"),
                                  url = URL.createObjectURL(file);
                          a.href = url;
                          a.download = 'file.txt';
                          document.body.appendChild(a);
                          a.click();
                          setTimeout(function() {
                              document.body.removeChild(a);
                              window.URL.revokeObjectURL(url);  
                          }, 0); 
        }
    })
          
        });        
    })

</script>
</body>
</html>
